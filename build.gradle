apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'groovy'

repositories {
    mavenLocal()
    mavenCentral()
    jcenter()
}

compileJava {
    options.fork = true
    options.incremental = true
}

sourceSets {
    appBace {
        groovy {
            srcDir 'app-bace/app'
            srcDir 'app-bace/bizrule'
            srcDir 'app-bace/http'
            srcDir 'app-bace/dbeans'
            srcDir 'app-bace/properties'
        }
        resources {
            srcDir 'app-bace/conf'
        }
        output.classesDir = "$buildDir/classes/main"
        output.resourcesDir = "$buildDir/classes/main"
    }
    bace {
        java {
            srcDir 'bace/java'
        }
        output.classesDir = "$buildDir/classes/main"
        output.resourcesDir = "$buildDir/classes/main"
    }
    compileGroovy.dependsOn("compileAppBaceGroovy")
    compileAppBaceGroovy.dependsOn("compileBaceJava")

    processResources.dependsOn("processAppBaceResources")
    processAppBaceResources.dependsOn("processBaceResources")
}

dependencies {
    appBaceCompile files('bace/java')
    appBaceCompile 'org.codehaus.groovy:groovy:2.4.5'
    appBaceCompile 'io.vertx:vertx-web:3.3.2'
    baceCompile 'io.vertx:vertx-web:3.3.2'
}
